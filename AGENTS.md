# MoonBit Project

This is a [MoonBit](https://docs.moonbitlang.com) project.

## Quick Commands

```bash
just           # check + test
just fmt       # format code
just check     # type check
just test      # run tests
just test-update  # update snapshot tests
just run       # run main
just info      # generate type definition files
```

## Project Structure

- `moon.mod.json` - Module definition
- `moon.pkg` - Package dependencies (per directory)
- `*.mbt` - Source files
- `*_test.mbt` - Blackbox test files
- `*_wbtest.mbt` - Whitebox test files
- `*.mbt.md` - Doc test files
- `*.mbti` - Generated type interfaces (auto-generated by `moon info`)

## Coding Convention

- Each block is separated by `///|`
- MoonBit code uses snake_case for variables/functions (lowercase only)

## Code Navigation (IMPORTANT)

**Always use `moon ide` and `moon doc` instead of grep/Read for code exploration.**

### `moon ide` - Semantic Code Navigation

```bash
# Find symbol definition
moon ide goto-definition -query 'symbol_name'
moon ide goto-definition -query 'Type::method'

# Find with tag filtering (pub fn, struct, trait, etc.)
moon ide goto-definition -tags 'pub fn' -query 'my_func'

# Find in specific package
moon ide goto-definition -query '@pkg_name symbol'

# Find all references
moon ide find-references -query 'MyType'

# Show definition inline
moon ide peek-def Type::method

# List symbols in package/file
moon ide outline .
moon ide outline src/lib.mbt
```

### `moon doc` - API Discovery

```bash
moon doc ''           # List available packages
moon doc 'String'     # List String methods
moon doc '@buffer'    # List symbols in package
moon doc 'String::*rev*'  # Glob pattern search
```

## Tooling

- `moon fmt` is used to format your code properly.
- `moon info` is used to update the generated interface of the package.
- `moon test` to check the test is passed. Use `moon test --update` to update snapshots.
- `moon check` to check the code is linted correctly.

## Before Commit

```bash
just release-check  # fmt + info + check + test
```
